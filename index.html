<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Bee Clicker: Royal Edition üêù</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1e3799">

    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- TELA INICIAL NATALINA -->
    <div id="startScreen">
        <div class="snow-container" id="snowContainer"></div>
        <div class="start-bee-wrapper">
            <div class="start-logo">
                <img src="assets/NoelBee.png" class="bee-img-large" alt="Bee Logo">
            </div>
        </div>
        <div class="start-title">
            BEE CL<span class="letter-i-wrapper">I<span class="tree-overlay">üéÑ</span></span>CKER
        </div>
        <div id="loadingMsg" style="color: white; font-size: 12px; margin-bottom: 10px; display: none;">Carregando m√≥dulos...</div>
        <div style="width: 200px;">
            <button onclick="Game.enterGame()">ENTRAR NO REINO</button>
            <button onclick="Utils.openChangelog()" style="background:rgba(255,255,255,0.2); color:white; box-shadow:none; margin-top:10px; font-size:12px;">VER NOVIDADES</button>
        </div>
        <div style="margin-top: 20px; color: rgba(255,255,255,0.6); font-size: 10px; font-weight: 800;">v4.0.8 ‚Ä¢ ROYAL EDITION</div>
    </div>

    <!-- INTERFACE DO JOGO -->
    <div class="game" id="gameUI">
        <div class="snow-container" id="gameSnowContainer"></div>
        
        <!-- Notifica√ß√µes e Top Bar -->
        <div class="card notif-card">
            <div class="save-icon" id="saveIndicator">üíæ</div>
            <div class="settings-gear" onclick="Utils.openModal('settingsModal')">‚öôÔ∏è</div>
            <div class="daily-mission-btn" onclick="Utils.openModal('missionsModal')">üìú</div>
            <div id="notifContainer">
                <div class="notif-static-icon">üëë</div>
            </div>
        </div>

        <!-- Status e N√≠vel -->
        <div class="card">
            <div class="level-container">
                <div class="level-info">
                    <span id="levelText">N√≠vel Real 1</span>
                    <span id="xpText">0 / 1000 XP</span>
                </div>
                <div class="xp-bg"><div class="xp-fill" id="xpFill"></div></div>
            </div>
            <div class="stats">
                <span id="honeyDisplay">0</span> üçØ
            </div>
        </div>

        <!-- √Årea de Clique -->
        <div class="click-zone" id="clickZone">
            <div id="active-boosts"></div>
            <div style="width: 65px;"></div> <!-- Spacer -->
            <div class="aura-wrapper">
                <div class="aura" id="aura"></div>
                <div class="bee-container" id="beeContainer">
                    <img id="mainBeeImg" src="assets/NoelBee.png" class="bee-img" alt="Bee">
                </div>
            </div>
            <div class="target" id="clickTarget">üéØ</div>
        </div>

        <!-- Painel Principal (Abas) -->
        <div class="main-panel">
            <div class="tabs-header">
                <button class="tab-btn active" onclick="UI.openTab('upgrades', this)">üöÄ</button>
                <button class="tab-btn" onclick="UI.openTab('shop', this)">üõçÔ∏è</button>
                <button class="tab-btn" onclick="UI.openTab('achievements', this)">üèÜ</button>
                <button class="tab-btn" onclick="UI.openTab('events', this)">üé°</button>
            </div>
            
            <div class="tabs-content">
                <!-- Aba Upgrades -->
                <div class="tab-pane active" id="upgrades">
                    <div class="scroll-area">
                        <button id="btnUpgradeClick">
                            MELHORAR CLIQUE<br>
                            <small id="clickCostText">Custo: 10 üçØ</small>
                        </button>
                        <button id="btnAutoAction">
                            <span id="autoActionTitle">DESBLOQUEAR AUTO</span><br>
                            <small id="autoCostText">Custo: 100 üçØ</small>
                        </button>
                    </div>
                </div>

                <!-- Aba Loja -->
                <div class="tab-pane" id="shop">
                    <div class="fixed-nav-header">
                        <div class="shop-nav">
                            <button class="sub-tab-btn active" onclick="UI.openSubShop('boosts', this)">BOOSTS</button>
                            <button class="sub-tab-btn" onclick="UI.openSubShop('skins', this)">SKINS</button>
                            <button class="sub-tab-btn" onclick="UI.openSubShop('bgs', this)">CEN√ÅRIOS</button>
                        </div>
                    </div>
                    <div class="scroll-area">
                        <div id="shop_boosts" class="sub-shop-pane">
                            <div style="font-size: 12px; font-weight: 800; margin-bottom: 10px; color: var(--dark);">PIMENTA (CLIQUE 2X)</div>
                            <div class="shop-grid" id="grid_pepper"></div>
                            <div style="font-size: 12px; font-weight: 800; margin: 15px 0 10px 0; color: var(--dark);">ENERG√âTICO (AUTO 2X)</div>
                            <div class="shop-grid" id="grid_energy"></div>
                            <div style="font-size: 12px; font-weight: 800; margin: 15px 0 10px 0; color: var(--dark);">FLOR (XP 5X)</div>
                            <div class="shop-grid" id="grid_flower"></div>
                        </div>
                        <div id="shop_skins" class="sub-shop-pane" style="display:none">
                            <div class="shop-grid" id="skinList"></div>
                        </div>
                        <div id="shop_bgs" class="sub-shop-pane" style="display:none">
                            <div class="shop-grid" id="bgList"></div>
                        </div>
                    </div>
                </div>

                <!-- Aba Conquistas -->
                <div class="tab-pane" id="achievements">
                    <div class="fixed-nav-header">
                        <div class="filter-bar">
                            <button class="filter-btn active" onclick="UI.setAchFilter('all', this)">TODAS</button>
                            <button class="filter-btn" onclick="UI.setAchFilter('common', this)">COMUM</button>
                            <button class="filter-btn" onclick="UI.setAchFilter('rare', this)">RARA</button>
                            <button class="filter-btn" onclick="UI.setAchFilter('epic', this)">√âPICA</button>
                        </div>
                    </div>
                    <div class="scroll-area" id="achList"></div>
                </div>

                <!-- Aba Eventos -->
                <div class="tab-pane" id="events">
                    <div class="scroll-area">
                        <div class="event-item">
                            <div class="event-info">
                                <div class="event-name">Corrida da Cobrinha üêç</div>
                                <div class="event-reward">Ganhe Mel e XP por ponto!</div>
                            </div>
                            <button class="btn-play-event" onclick="Game.prepareMinigame('snake')">JOGAR</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAIS -->
    <div class="modal" id="settingsModal">
        <div class="modal-box">
            <div class="modal-header">
                <span>Configura√ß√µes ‚öôÔ∏è</span>
                <span style="cursor:pointer" onclick="Utils.closeModal('settingsModal')">‚úñ</span>
            </div>
            <div class="modal-content-scroll">
                <div class="config-row">
                    <div class="config-label"><span>M√∫sica</span><span id="musicVolLabel">50%</span></div>
                    <input type="range" id="musicVol" min="0" max="100" value="50" oninput="Utils.updateVolume('music')">
                </div>
                <div class="config-row">
                    <div class="config-label"><span>Efeitos</span><span id="clickVolLabel">80%</span></div>
                    <input type="range" id="clickVol" min="0" max="100" value="80" oninput="Utils.updateVolume('click')">
                </div>
                <button onclick="Game.returnToMain()" style="background:#ff4757; color:white; box-shadow:0 4px 0 #c0392b;">SAIR DO JOGO</button>
            </div>
        </div>
    </div>

    <div class="modal" id="missionsModal">
        <div class="modal-box">
            <div class="modal-header">
                <span>Miss√µes Reais üìú</span>
                <span style="cursor:pointer" onclick="Utils.closeModal('missionsModal')">‚úñ</span>
            </div>
            <div class="modal-content-scroll" id="missionList"></div>
            <div class="modal-footer">
                <button onclick="Utils.closeModal('missionsModal')" style="margin-top: 0;">FECHAR</button>
            </div>
        </div>
    </div>

    <div class="modal" id="changelogModal">
        <div class="modal-box">
            <div class="modal-header">
                <span>Hist√≥rico Real üìú</span>
                <span style="cursor:pointer" onclick="Utils.closeModal('changelogModal')">‚úñ</span>
            </div>
            <div class="modal-content-scroll" id="changelogContent"></div>
            <div class="modal-footer">
                <button onclick="Utils.closeModal('changelogModal')" style="margin-top: 0;">ENTENDIDO!</button>
            </div>
        </div>
    </div>

    <!-- MINIGAME OVERLAY -->
    <div id="minigameOverlay" style="display:none; position:fixed; inset:0; background:#000; z-index:20000; flex-direction:column; align-items:center; justify-content:center;">
        <div id="mgCountdown" style="font-size:80px; color:#ffcc00; font-weight:900;">3</div>
        <div id="snakeGameContainer" style="position:relative;">
            <div style="position:absolute; top:-40px; width:100%; display:flex; justify-content:space-between; color:white; font-weight:900;">
                <span>PONTOS: <span id="snakeScore">0</span></span>
                <span onclick="Game.exitSnakeGame()" style="cursor:pointer">SAIR ‚úñ</span>
            </div>
            <canvas id="snakeCanvas" style="border:4px solid #333; border-radius:10px; background:#1a1a1a;"></canvas>
            <div class="snake-controls" style="margin-top:20px; display:grid; grid-template-columns:repeat(3, 1fr); gap:10px; width:200px; margin-left:auto; margin-right:auto;">
                <div style="grid-column:2"><button class="ctrl-btn" onclick="Game.changeSnakeDir('UP')">‚ñ≤</button></div>
                <div style="grid-column:1"><button class="ctrl-btn" onclick="Game.changeSnakeDir('LEFT')">‚óÄ</button></div>
                <div style="grid-column:2"><button class="ctrl-btn" onclick="Game.changeSnakeDir('DOWN')">‚ñº</button></div>
                <div style="grid-column:3"><button class="ctrl-btn" onclick="Game.changeSnakeDir('RIGHT')">‚ñ∂</button></div>
            </div>
        </div>
        <div id="mgResultScreen" style="display:none; position:absolute; inset:0; background:rgba(0,0,0,0.9); flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:20px;">
            <div style="font-size:40px; color:#ffcc00; font-weight:900; margin-bottom:10px;">FIM DE JOGO!</div>
            <div style="font-size:20px; color:white; margin-bottom:20px;">PONTUA√á√ÉO: <span id="mgResultScore">0</span></div>
            <div id="mgResultReward" style="background:rgba(255,255,255,0.1); padding:20px; border-radius:20px; color:#ffcc00; font-weight:800; margin-bottom:30px;"></div>
            <button onclick="Game.closeMgResult()" style="max-width:200px;">VOLTAR</button>
        </div>
    </div>

    <!-- Scripts Modulares -->
    <script type="module" src="./js/main.js"></script>
</body>
</html>
