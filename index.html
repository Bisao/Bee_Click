<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Bee Clicker: Royal Edition üêù</title>

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#ffcc00">

<style>
:root{
  --bg1:#87ceeb; --bg2:#fff3b0; --card:#fff;
  --accent:#ffcc00; --dark:#4a3b00; --shadow:0 10px 30px rgba(0,0,0,0.15);
  --xp-bar:#4caf50;
  --common: #b2bec3;
  --rare: #0984e3;
  --epic: #a29bfe;
}

*{ box-sizing:border-box; user-select:none; -webkit-tap-highlight-color:transparent; touch-action: none; }

body, html {
  margin:0; padding: 0; width: 100%; height: 100%;
  font-family:system-ui, -apple-system, sans-serif;
  background: linear-gradient(180deg, var(--bg1), var(--bg2));
  background-attachment: fixed;
}

body { display: flex; align-items: center; justify-content: center; min-height: 100svh; overflow: hidden; }

#startScreen {
    position: fixed; inset: 0; background: linear-gradient(180deg, var(--accent), var(--bg2));
    z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center;
    transition: opacity 0.5s ease;
}
.start-logo { font-size: 100px; animation: floatBee 3s infinite ease-in-out; }
.start-title { font-size: 42px; font-weight: 900; color: var(--dark); margin: 20px 0; text-shadow: 0 4px 0 rgba(0,0,0,0.1); }
.version-tag { position: absolute; bottom: 20px; font-size: 12px; font-weight: bold; color: rgba(0,0,0,0.3); }

.game{ width:100%; max-width:420px; height: 100vh; padding:14px; position: relative; display: flex; flex-direction: column; opacity: 0; transition: opacity 0.5s; }

.card{ background:var(--card); border-radius:26px; padding:20px; box-shadow:var(--shadow); text-align:center; position: relative; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.4); }

.notif-card { height: 65px; display: flex; align-items: center; padding: 0 20px; overflow: hidden; background: #fff; flex-shrink: 0; }
.notif-icon-fixed { font-size: 22px; margin-right: 15px; opacity: 0.7; flex-shrink: 0; }
#notifContainer { flex: 1; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; }

.save-icon { position: absolute; left: 18px; top: 22px; font-size: 18px; opacity: 0; transition: 0.3s; z-index: 10; }
.save-icon.visible { opacity: 1; }

.top-btns { position: absolute; right: 18px; top: 18px; display: flex; gap: 10px; }
.circle-btn { background: #f2f2f2; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }

.level-container { margin-top: 12px; text-align: left; }
.level-info { display: flex; justify-content: space-between; font-weight: bold; font-size: 13px; margin-bottom: 6px; color: var(--dark); }
.xp-bg { width: 100%; height: 12px; background: #eee; border-radius: 12px; overflow: hidden; }
.xp-fill { height: 100%; background: var(--xp-bar); width: 0%; transition: width 0.5s; }
.stats{ margin-top:8px; font-size:18px; font-weight: 800; color: var(--dark); }

.click-zone { display: flex; justify-content: space-between; align-items: center; width: 100%; height: 180px; padding: 0 5px; position: relative; }
.aura-wrapper { position: relative; width: 110px; height: 110px; display: flex; justify-content: center; align-items: center; z-index: 5; }
.aura { position: absolute; width: 150px; height: 150px; border-radius: 50%; filter: blur(25px); opacity: 0.3; transition: all 0.2s; background: radial-gradient(circle, rgba(255,204,0,0.5), transparent 70%); }
.bee { font-size: 75px; z-index: 2; animation: floatBee 3s infinite ease-in-out; cursor: pointer; }
@keyframes floatBee { 0%, 100%{transform:translateY(0) rotate(0deg);} 50%{transform:translateY(-10px) rotate(4deg);} }

.target { height: 65px; width: 65px; border-radius: 20px; border: 3px dashed #ffeb3b; display: flex; align-items: center; justify-content: center; font-size: 28px; opacity: 0.7; cursor: pointer; }

#active-boosts { position: absolute; top: 5px; width: 100%; display: flex; justify-content: center; gap: 8px; pointer-events: none; }
.active-boost-timer { display: flex; align-items: center; gap: 4px; background: rgba(255,255,255,0.9); padding: 4px 8px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 1px solid #ffcc00; }
.active-boost-timer span { font-size: 11px; font-weight: 900; color: var(--dark); }

.main-panel { flex: 1; display: flex; flex-direction: column; overflow: hidden; background: var(--card); border-radius: 26px 26px 0 0; box-shadow: var(--shadow); margin-bottom: -14px; }
.tabs-header { display: flex; background: #f8f8f8; border-bottom: 1px solid #eee; flex-shrink: 0; }
.tab-btn { flex: 1; padding: 15px; border: none; background: none; font-weight: 800; color: #999; cursor: pointer; transition: 0.2s; font-size: 13px; }
.tab-btn.active { color: var(--dark); border-bottom: 3px solid var(--accent); background: #fff; }

.tabs-content { flex: 1; overflow-y: auto; padding: 15px; }
.tab-pane { display: none; }
.tab-pane.active { display: block; }

.shop-section { margin-bottom: 25px; text-align: left; }
.shop-section-title { font-size: 16px; font-weight: 900; color: var(--dark); margin-bottom: 5px; }
.status-text { font-size: 12px; font-weight: 800; margin-bottom: 10px; display: block; padding: 6px 10px; border-radius: 10px; background: #f9f9f9; width: fit-content; }
.status-active { background: #e8f5e9; color: var(--xp-bar); border: 1px solid var(--xp-bar); }
.shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(85px, 1fr)); gap: 8px; }
.buy-btn-small { padding: 8px 4px; font-size: 10px; margin: 0; height: 50px; display: flex; flex-direction: column; align-items: center; justify-content: center; }

button{ width:100%; padding:15px; margin-top:8px; border:none; border-radius:15px; font-size:14px; font-weight:800; background:var(--accent); color:var(--dark); box-shadow:0 4px 0 #d1ad00; cursor: pointer; transition: 0.1s; }
button:active{ transform:translateY(2px); box-shadow:0 2px 0 #d1ad00; }
button:disabled { background:#e0e0e0 !important; color:#aaa !important; box-shadow: none !important; }

.help-guide { padding: 20px; text-align: left; }
.guide-item { display: flex; gap: 12px; margin-bottom: 15px; }
.guide-icon { font-size: 24px; background: #f0f0f0; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 12px; flex-shrink: 0; }
.guide-text b { display: block; font-size: 14px; color: var(--dark); }
.guide-text p { margin: 0; font-size: 12px; color: #666; }

.ach-card { display: flex; align-items: center; padding: 12px; border-radius: 15px; background: #fcfcfc; border: 2px solid #eee; text-align: left; gap: 12px; margin-bottom: 8px; }
.ach-card.unlocked { border-color: var(--rare); background: #f0f7ff; }
.locked { filter: grayscale(1); opacity: 0.4; }

.modal{ position:fixed; inset:0; background:rgba(0,0,0,0.5); backdrop-filter: blur(6px); display:none; justify-content:center; align-items:center; z-index:5000; padding: 20px; }
.modal-box{ background:#fff; width:100%; max-width:400px; border-radius:30px; overflow:hidden; }
.modal-header{ padding:20px; background: var(--accent); font-weight:900; display:flex; justify-content:space-between; color: var(--dark); }

.popup { position: absolute; background: #fff; padding: 8px 18px; border-radius: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); font-weight: 800; font-size: 11px; white-space: nowrap; border-left: 6px solid var(--common); animation: slideInOut 4s ease-in-out forwards; }
@keyframes slideInOut { 0% { transform: translateX(-140%); opacity: 0; } 8% { transform: translateX(0); opacity: 1; } 92% { transform: translateX(0); opacity: 1; } 100% { transform: translateX(140%); opacity: 0; } }
</style>
</head>

<body oncontextmenu="return false;">

<div id="startScreen">
    <div class="start-logo">üêù</div>
    <div class="start-title">BEE CLICKER</div>
    <button style="width: 240px; font-size: 18px;" onclick="enterGame()">JOGAR AGORA</button>
    <div class="version-tag">VERS√ÉO 2.4.0 (ULTIMATE)</div>
</div>

<div class="game" id="gameUI">
  <div class="card">
    <div id="saveIndicator" class="save-icon">üíæ</div>
    <div class="top-btns"><button class="circle-btn" id="btnHelp">‚ùì</button></div>
    <div style="font-size: 20px; font-weight: 900; margin-top: 5px;">Bee Clicker üêù</div>
    <div class="stats">üçØ <span id="honey">0</span> | ‚ö° <span id="mps">0</span>/s</div>
    <div class="level-container">
      <div class="level-info"><span>N√≠vel <span id="lvlDisplay">1</span></span><span id="xpDisplay">0 / 1000</span></div>
      <div class="xp-bg"><div class="xp-fill" id="xpFill"></div></div>
    </div>
  </div>

  <div class="card notif-card">
      <div class="notif-icon-fixed">üì¢</div>
      <div id="notifContainer"></div>
  </div>

  <div class="card" style="padding: 10px;">
    <div id="active-boosts"></div>
    <div class="click-zone" id="clickZone">
      <div class="target" id="leftTarget">üéØ</div>
      <div class="aura-wrapper">
        <div class="aura" id="aura"></div>
        <div id="bee" class="bee">üêù</div>
      </div>
      <div class="target" id="rightTarget">üéØ</div>
    </div>
  </div>

  <div class="main-panel">
      <div class="tabs-header">
          <button class="tab-btn active" onclick="openTab('upgrades', this)">UPGRADES</button>
          <button class="tab-btn" onclick="openTab('shop', this)">LOJA</button>
          <button class="tab-btn" onclick="openTab('achievements', this)">CONQUISTAS</button>
      </div>
      <div class="tabs-content" id="mainScrollArea">
          <div id="upgrades" class="tab-pane active">
              <button id="btnUpgradeClick">Upgrade Clique ‚Äì 10 üçØ</button>
              <button id="btnAutoAction">Desbloquear Auto ‚Äì 100 üçØ</button>
          </div>

          <div id="shop" class="tab-pane">
              <div class="shop-section">
                  <div class="shop-section-title">üå∂Ô∏è Pimenta (3x Mel)</div>
                  <small id="status_pepper" class="status-text">Inativo</small>
                  <div class="shop-grid" id="grid_pepper"></div>
              </div>
              <div class="shop-section">
                  <div class="shop-section-title">ü•§ Energ√©tico (2x Velocidade)</div>
                  <small id="status_energy" class="status-text">Inativo</small>
                  <div class="shop-grid" id="grid_energy"></div>
              </div>
              <div class="shop-section">
                  <div class="shop-section-title">üåº Flor Dourada (5x XP)</div>
                  <small id="status_flower" class="status-text">Inativo</small>
                  <div class="shop-grid" id="grid_flower"></div>
              </div>
          </div>

          <div id="achievements" class="tab-pane">
              <div style="text-align: center; font-weight: 800; font-size: 12px; margin-bottom: 10px;">üèÜ <span id="achCount">0</span> Conquistas Desbloqueadas</div>
              <div id="achList"></div>
          </div>
      </div>
  </div>
</div>

<div class="modal" id="helpModal">
  <div class="modal-box">
    <div class="modal-header">üêù Manual do Apicultor <span onclick="closeModal('helpModal')" style="cursor:pointer">√ó</span></div>
    <div class="help-guide">
        <div class="guide-item"><div class="guide-icon">üêù</div><div class="guide-text"><b>Coleta Real</b><p>Clique na abelha ou nos alvos (üéØ) para gerar mel. O bot√£o direito do mouse tamb√©m conta!</p></div></div>
        <div class="guide-item"><div class="guide-icon">üéØ</div><div class="guide-text"><b>Multi-Touch</b><p>No mobile, voc√™ pode usar v√°rios dedos ao mesmo tempo para coletar mel muito mais r√°pido.</p></div></div>
        <div class="guide-item"><div class="guide-icon">üõí</div><div class="guide-text"><b>Loja e Stacking</b><p>Compre boosts de tempo. Eles acumulam! Comprar 1h de boost garante b√¥nus offline total por 1h.</p></div></div>
        <div class="guide-item"><div class="guide-icon">üèÜ</div><div class="guide-text"><b>Conquistas</b><p>Existem 200 conquistas. Quanto mais voc√™ desbloqueia, maior √© o seu prest√≠gio.</p></div></div>
        <button onclick="closeModal('helpModal')" style="margin-top:5px;">VAMOS COLETAR!</button>
    </div>
  </div>
</div>

<div class="modal" id="offlineModal">
    <div class="modal-box">
        <div class="modal-header">üêù Mel de Descanso</div>
        <div style="text-align:center; padding:30px;">
            <div style="font-size:60px;">üçØ</div>
            <p id="offlineText" style="font-weight:bold;"></p>
            <button id="btnCollectOffline" style="background:var(--xp-bar);color:white;">COLETAR TUDO</button>
        </div>
    </div>
</div>

<script>
const SAVE_KEY = "BeeRoyal_Balance_V2";
let honey=0, totalHoneyEver=0, hPerClick=1, clickCost=10, level=1, currentXP=0, nextLevelXP=1000, autoUnlocked=false, autoLevel=1, autoCost=100;
let activeBoosts={pepper:0, energy:0, flower:0};
let gameLoaded = false, notificationQueue = [], isProcessingNotification = false;

const durations = [
    { label: "30s", t: 300, m: 1 }, { label: "1m", t: 600, m: 1.8 }, { label: "5m", t: 3000, m: 8 },
    { label: "30m", t: 18000, m: 40 }, { label: "1h", t: 36000, m: 70 }, { label: "12h", t: 432000, m: 700 }, { label: "24h", t: 864000, m: 1200 }
];
const boostBases = { pepper: 500, energy: 300, flower: 1000 };

const achievements = [];
function initAchievements() {
    achievements.length = 0;
    const names = ["Iniciante", "Aprendiz", "Trabalhador", "Fiel", "Dedicado", "Especialista", "Mestre", "Lend√°rio", "Divino", "Supremo"];
    for(let i=1; i<=200; i++) {
        let val = Math.pow(1.5, i) * 100;
        let prefix = names[Math.floor((i-1)/20)] || "Magnata";
        achievements.push({ id: i, n: `${prefix} #${i}`, d: `Mel total: ${formatNum(val)}`, c: () => totalHoneyEver >= val, u: false, i: "üçØ" });
    }
}
initAchievements();

function formatTime(t) {
    let s = Math.ceil(t/10);
    if(s < 60) return s + "s";
    if(s < 3600) return Math.floor(s/60) + "m " + (s%60) + "s";
    return Math.floor(s/3600) + "h " + Math.floor((s%3600)/60) + "m";
}

function updateUI() {
    document.getElementById("honey").textContent = formatNum(honey);
    document.getElementById("mps").textContent = autoUnlocked ? formatNum((2 * autoLevel) * getGlobalBonus()) : 0;
    document.getElementById("lvlDisplay").textContent = level;
    document.getElementById("xpDisplay").textContent = `${formatNum(currentXP)} / ${formatNum(nextLevelXP)}`;
    document.getElementById("xpFill").style.width = `${Math.min(100, (currentXP / nextLevelXP) * 100)}%`;
    document.getElementById("achCount").textContent = achievements.filter(a => a.u).length;
    
    document.getElementById("btnUpgradeClick").textContent = `Upgrade Clique ‚Äì ${formatNum(clickCost)} üçØ`;
    document.getElementById("btnAutoAction").textContent = !autoUnlocked ? `Auto-Mel ‚Äì ${formatNum(autoCost)} üçØ` : `Upgrade Auto ‚Äì ${formatNum(autoCost)} üçØ`;
    document.getElementById("btnUpgradeClick").disabled = (honey < clickCost);
    document.getElementById("btnAutoAction").disabled = (honey < autoCost);

    ['pepper', 'energy', 'flower'].forEach(type => {
        const status = document.getElementById(`status_${type}`);
        status.textContent = activeBoosts[type] > 0 ? `Restante: ${formatTime(activeBoosts[type])}` : "Inativo";
        status.className = activeBoosts[type] > 0 ? "status-text status-active" : "status-text";
        durations.forEach(d => {
            const btn = document.getElementById(`buy_${type}_${d.t}`);
            if(btn){
                const cost = Math.floor(boostBases[type] * level * d.m);
                btn.innerHTML = `<b>${d.label}</b><br>${formatNum(cost)}`;
                btn.disabled = (honey < cost);
            }
        });
    });

    const badgeContainer = document.getElementById("active-boosts");
    badgeContainer.innerHTML = "";
    for(let b in activeBoosts) if(activeBoosts[b] > 0) {
        const icon = b === 'pepper' ? 'üå∂Ô∏è' : b === 'energy' ? 'ü•§' : 'üåº';
        badgeContainer.innerHTML += `<div class="active-boost-timer"><span>${icon}</span><span>${formatTime(activeBoosts[b])}</span></div>`;
    }
}

function buyBoost(type, ticks, mult) {
    const cost = Math.floor(boostBases[type] * level * mult);
    if(honey >= cost) { honey -= cost; activeBoosts[type] += ticks; updateUI(); executeSave(); }
}

function calculateOfflineMel(elapsedTicks) {
    let totalOfflineMel = 0;
    let ticksToProcess = elapsedTicks;
    let baseMPS = (2 * autoLevel);

    // Simula√ß√£o simplificada de consumo de boosts offline
    // Verificamos o boost de mel (Pepper) e velocidade (Energy)
    while(ticksToProcess > 0) {
        let step = Math.min(ticksToProcess, activeBoosts.pepper || ticksToProcess, activeBoosts.energy || ticksToProcess, 100);
        let currentMult = 1;
        if(activeBoosts.pepper > 0) { currentMult *= 3; activeBoosts.pepper = Math.max(0, activeBoosts.pepper - step); }
        if(activeBoosts.energy > 0) { currentMult *= 2; activeBoosts.energy = Math.max(0, activeBoosts.energy - step); }
        
        totalOfflineMel += (step / 10) * baseMPS * currentMult;
        ticksToProcess -= step;
        if(activeBoosts.pepper <= 0 && activeBoosts.energy <= 0) {
            totalOfflineMel += (ticksToProcess / 10) * baseMPS;
            ticksToProcess = 0;
        }
    }
    return totalOfflineMel;
}

function load(){
    const raw = localStorage.getItem(SAVE_KEY);
    if(raw){
        try {
            const d = JSON.parse(raw);
            honey=d.honey||0; totalHoneyEver=d.totalHoneyEver||0; hPerClick=d.hPerClick||1; clickCost=d.clickCost||10; level=d.level||1; currentXP=d.currentXP||0; nextLevelXP=d.nextLevelXP||1000; autoUnlocked=d.autoUnlocked||false; autoLevel=d.autoLevel||1; autoCost=d.autoCost||100;
            if(d.activeBoosts) activeBoosts = d.activeBoosts;
            const elapsedTicks = d.timestamp ? Math.floor((Date.now() - d.timestamp) / 100) : 0;
            
            if(autoUnlocked && elapsedTicks > 150){ 
                let offlineMel = calculateOfflineMel(elapsedTicks);
                honey += offlineMel; totalHoneyEver += offlineMel;
                document.getElementById("offlineText").textContent = `Bem-vindo de volta! Colhido: ${formatNum(offlineMel)} mel!`;
                openModal('offlineModal'); 
            } else {
                // Se n√£o houver offline longo, apenas consome o tempo dos boosts
                for(let b in activeBoosts) activeBoosts[b] = Math.max(0, activeBoosts[b] - elapsedTicks);
            }

            if(d.achs) d.achs.forEach((u,i) => { if(achievements[i]) achievements[i].u = u; });
            if(autoUnlocked) startAuto();
        } catch(e) { console.error(e); }
    }
    gameLoaded = true; buildShop(); updateUI();
}

function buildShop() {
    ['pepper', 'energy', 'flower'].forEach(type => {
        const grid = document.getElementById(`grid_${type}`);
        grid.innerHTML = "";
        durations.forEach(d => {
            const btn = document.createElement("button");
            btn.className = "buy-btn-small";
            btn.id = `buy_${type}_${d.t}`;
            btn.onclick = () => buyBoost(type, d.t, d.m);
            grid.appendChild(btn);
        });
    });
}

function enterGame() {
    const el = document.documentElement;
    if (el.requestFullscreen) el.requestFullscreen();
    document.getElementById('startScreen').style.opacity = '0';
    setTimeout(() => { document.getElementById('startScreen').style.display = 'none'; document.getElementById('gameUI').style.opacity = '1'; }, 500);
}

function openTab(id, btn) { document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active')); document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active')); document.getElementById(id).classList.add('active'); btn.classList.add('active'); if(id === 'achievements') renderAchs(); }
function formatNum(n) { if (n >= 1e12) return (n/1e12).toFixed(1) + "T"; if (n >= 1e9) return (n/1e9).toFixed(1) + "B"; if (n >= 1e6) return (n/1e6).toFixed(1) + "M"; return Math.floor(n).toLocaleString(); }
function notify(a) { notificationQueue.push(a); processQueue(); }
function processQueue() { if (isProcessingNotification || notificationQueue.length === 0) return; isProcessingNotification = true; const a = notificationQueue.shift(); const container = document.getElementById("notifContainer"); const div = document.createElement("div"); div.className = `popup`; div.innerHTML = `üì¢ ${a.n}`; container.appendChild(div); setTimeout(() => { div.remove(); isProcessingNotification = false; processQueue(); }, 4000); }

function getGlobalBonus() { let m = 1; if(activeBoosts.pepper > 0) m *= 3; if(activeBoosts.energy > 0) m *= 2; return m; }
function doClick() { const g = hPerClick * getGlobalBonus(); honey += g; totalHoneyEver += g; addXP(g); updateUI(); }
function addXP(amt) { let m = (activeBoosts.flower > 0) ? 5 : 1; currentXP += (amt * m); while(currentXP >= nextLevelXP){ currentXP -= nextLevelXP; level++; nextLevelXP = Math.floor(nextLevelXP * 1.5); notify({n:`N√≠vel Real ${level}!`}); } }
function startAuto() { if(window.autoInt) clearInterval(window.autoInt); window.autoInt = setInterval(() => { if(autoUnlocked){ honey += (2 * autoLevel) * getGlobalBonus(); updateUI(); } }, 1000); }

let clickBuffer = [];
setInterval(() => {
    if(!gameLoaded) return;
    const cps = clickBuffer.filter(t => Date.now() - t < 1000).length;
    const aura = document.getElementById("aura"), bee = document.getElementById("bee");
    let s=1, o=.3, c="rgba(255,204,0,.4)", sp=3;
    if(cps > 4){ s=1.4; o=.6; c="rgba(255,140,0,.6)"; sp=1.2; }
    if(aura){ aura.style.transform=`scale(${s})`; aura.style.opacity=o; aura.style.background=`radial-gradient(circle, ${c}, transparent 70%)`; }
    if(bee) bee.style.animationDuration=`${sp}s`;
    
    achievements.forEach(a => { if(!a.u && a.c()){ a.u = true; notify(a); executeSave(); if(document.getElementById('achievements').classList.contains('active')) renderAchs(); } });
    for(let b in activeBoosts) if(activeBoosts[b] > 0) activeBoosts[b]--;
    if(Date.now() % 1000 < 150) updateUI();
}, 100);

function openModal(id){ document.getElementById(id).style.display="flex"; }
function closeModal(id){ document.getElementById(id).style.display="none"; }
function renderAchs(){ const l=document.getElementById("achList"); l.innerHTML=""; achievements.forEach(a=>{ l.innerHTML+=`<div class="ach-card ${a.u?'unlocked':'locked'}"><div class="ach-icon">${a.u?a.i:'üîí'}</div><div class="ach-info"><b>${a.n}</b><br><small>${a.d}</small></div></div>`; }); }

function executeSave(){ if(!gameLoaded) return; const data = {honey, totalHoneyEver, hPerClick, clickCost, level, currentXP, nextLevelXP, autoUnlocked, autoLevel, autoCost, activeBoosts, achs:achievements.map(a=>a.u), timestamp:Date.now()}; localStorage.setItem(SAVE_KEY, JSON.stringify(data)); document.getElementById("saveIndicator").classList.add("visible"); setTimeout(()=>document.getElementById("saveIndicator").classList.remove("visible"), 2000); }
setInterval(executeSave, 15000);

document.getElementById("btnHelp").onclick = () => openModal('helpModal');
const targets = ["clickZone", "bee", "leftTarget", "rightTarget"];
targets.forEach(id => {
    const el = document.getElementById(id);
    el.addEventListener("mousedown", (e) => { e.preventDefault(); clickBuffer.push(Date.now()); doClick(); });
    el.addEventListener("touchstart", (e) => {
        e.preventDefault();
        for (let i = 0; i < e.targetTouches.length; i++) {
            clickBuffer.push(Date.now());
            doClick();
        }
    }, {passive: false});
});

load();
</script>
</body>
</html>