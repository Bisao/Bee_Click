<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Bee Clicker: Royal Edition ğŸ</title>

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#ffcc00">

<style>
:root{
  --bg1:#87ceeb; --bg2:#fff3b0; --card:#fff;
  --accent:#ffcc00; --dark:#4a3b00; --shadow:0 10px 30px rgba(0,0,0,0.15);
  --xp-bar:#4caf50;
  --common: #b2bec3;
  --rare: #0984e3;
  --epic: #a29bfe;
}

*{ box-sizing:border-box; user-select:none; -webkit-tap-highlight-color:transparent; touch-action: manipulation; }

/* CENTRALIZAÃ‡ÃƒO UNIVERSAL */
body, html {
  margin:0; padding: 0; width: 100%; height: 100%;
  font-family:system-ui, -apple-system, sans-serif;
  background: linear-gradient(180deg, var(--bg1), var(--bg2));
  background-attachment: fixed;
}

body {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100svh;
  overflow: hidden;
}

/* TELA DE INÃCIO */
#startScreen {
    position: fixed; inset: 0; background: linear-gradient(180deg, var(--accent), var(--bg2));
    z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center;
    transition: opacity 0.5s ease;
}
.start-logo { font-size: 100px; animation: floatBee 3s infinite ease-in-out; }
.start-title { font-size: 42px; font-weight: 900; color: var(--dark); margin: 20px 0; text-shadow: 0 4px 0 rgba(0,0,0,0.1); }

/* GAME UI */
.game{ 
    width:100%; max-width:420px; padding:14px; 
    position: relative; display: flex; flex-direction: column; 
    opacity: 0; transition: opacity 0.5s;
}

.card{
  background:var(--card); border-radius:26px; padding:20px;
  box-shadow:var(--shadow); text-align:center; position: relative;
  margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.4);
}

.notif-card { height: 65px; display: flex; align-items: center; padding: 0 20px; overflow: hidden; background: #fff; }
.notif-icon-fixed { font-size: 22px; margin-right: 15px; opacity: 0.7; flex-shrink: 0; }
#notifContainer { flex: 1; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; }

.save-icon { position: absolute; left: 18px; top: 22px; font-size: 18px; opacity: 0; transition: 0.3s; z-index: 10; }
.save-icon.visible { opacity: 1; }

.top-btns { position: absolute; right: 18px; top: 18px; display: flex; gap: 10px; }
.circle-btn { background: #f2f2f2; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
.circle-btn:active { transform: scale(0.9); }

.level-container { margin-top: 12px; text-align: left; }
.level-info { display: flex; justify-content: space-between; font-weight: bold; font-size: 13px; margin-bottom: 6px; color: var(--dark); }
.xp-bg { width: 100%; height: 12px; background: #eee; border-radius: 12px; overflow: hidden; }
.xp-fill { height: 100%; background: var(--xp-bar); width: 0%; transition: width 0.5s; }
.stats{ margin-top:8px; font-size:20px; font-weight: 800; color: var(--dark); }

/* NOTIFICAÃ‡ÃƒO SLIDE */
.popup { 
    position: absolute; background: #fff; padding: 8px 18px; border-radius: 25px; 
    box-shadow: 0 4px 15px rgba(0,0,0,0.1); font-weight: 800; font-size: 11px; 
    white-space: nowrap; border-left: 6px solid var(--common); 
    animation: slideInOut 4s ease-in-out forwards; 
}
.popup.rare { border-left-color: var(--rare); background: #f0f7ff; }
.popup.epic { border-left-color: var(--epic); background: #f8f5ff; }

@keyframes slideInOut { 
    0% { transform: translateX(-140%); opacity: 0; } 
    8% { transform: translateX(0); opacity: 1; } 
    92% { transform: translateX(0); opacity: 1; } 
    100% { transform: translateX(140%); opacity: 0; } 
}

/* ÃREA DE CLIQUE SIMÃ‰TRICA */
.click-zone { 
    display: flex; justify-content: space-between; align-items: center; 
    width: 100%; height: 160px; padding: 0 5px; position: relative; 
}
.aura-wrapper { 
    position: relative; width: 120px; height: 120px; 
    display: flex; justify-content: center; align-items: center; z-index: 5; 
}
.aura { 
    position: absolute; width: 150px; height: 150px; border-radius: 50%; 
    filter: blur(20px); opacity: 0.3; transition: all 0.2s; 
    background: radial-gradient(circle, rgba(255,204,0,0.5), transparent 70%); 
}
.bee { font-size: 90px; z-index: 2; animation: floatBee 3s infinite ease-in-out; cursor: pointer; }

@keyframes floatBee { 0%, 100%{transform:translateY(0) rotate(0deg);} 50%{transform:translateY(-15px) rotate(4deg);} }

.target { 
    height: 80px; width: 80px; border-radius: 22px; border: 3px dashed #ffeb3b; 
    display: flex; align-items: center; justify-content: center; font-size: 32px; 
    opacity: 0.7; transition: all 0.1s; cursor: pointer;
}
.target:active { transform: scale(0.92); opacity: 1; background: rgba(255,235,59,0.1); }

/* BOTÃ•ES DE UPGRADE */
button{ 
    width:100%; padding:17px; margin-top:10px; border:none; border-radius:18px; 
    font-size:15px; font-weight:800; background:var(--accent); color:var(--dark); 
    box-shadow:0 6px 0 #d1ad00; cursor: pointer; transition: 0.1s; 
}
button:active{ transform:translateY(3px); box-shadow:0 3px 0 #d1ad00; }
button:disabled { background:#e0e0e0 !important; color:#aaa !important; box-shadow: none !important; pointer-events: none; }

/* MODAIS */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,0.5); backdrop-filter: blur(6px); display:none; justify-content:center; align-items:center; z-index:5000; padding: 20px; }
.modal-box{ background:#fff; width:100%; max-width:400px; border-radius:30px; overflow:hidden; display: flex; flex-direction: column; animation: modalIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
@keyframes modalIn { from{transform: translateY(30px); opacity: 0;} to{transform: translateY(0); opacity: 1;} }

.modal-header{ padding:20px; background: var(--accent); font-weight:900; display:flex; justify-content:space-between; align-items: center; color: var(--dark); }
.modal-body{ padding:0; max-height:60vh; overflow-y:auto; }

.acc-item { border-bottom: 1px solid #f0f0f0; }
.acc-header { padding: 18px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: 800; font-size: 14px; }
.acc-content { max-height: 0; overflow: hidden; background: #fafafa; transition: max-height 0.3s ease-out; }
.acc-body { padding: 18px; font-size: 13px; line-height: 1.6; color: #555; }
.acc-item.active .acc-content { max-height: 500px; }

.shop-item { display: flex; align-items: center; justify-content: space-between; padding: 18px; border-bottom: 1px solid #f0f0f0; gap: 12px; }
.buy-btn { width: auto; padding: 10px 18px; margin: 0; font-size: 13px; }

.filter-bar { display: flex; justify-content: center; gap: 12px; padding: 15px; background: #fdfdfd; border-bottom: 1px solid #eee; }
.filter-dot { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #eee; background: white; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 20px; transition: 0.2s; }
.filter-dot.active { border-color: var(--dark); transform: scale(1.1); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

.ach-card { display: flex; align-items: center; padding: 14px; border-radius: 20px; background: #fcfcfc; border: 2px solid transparent; text-align: left; gap: 16px; margin: 12px; transition: 0.3s; }
.ach-card.unlocked.common { border-color: var(--common); }
.ach-card.unlocked.rare { border-color: var(--rare); background: #f0f7ff; }
.ach-card.unlocked.epic { border-color: var(--epic); background: #f8f5ff; }
.locked { filter: grayscale(1); opacity: 0.4; }
</style>
</head>

<body>

<div id="startScreen">
    <div class="start-logo">ğŸ</div>
    <div class="start-title">BEE CLICKER</div>
    <button style="width: 240px; font-size: 18px;" onclick="enterGame()">JOGAR AGORA</button>
</div>

<div class="game" id="gameUI">
  <div class="card">
    <div id="saveIndicator" class="save-icon">ğŸ’¾</div>
    <div class="top-btns">
        <button class="circle-btn" id="btnShop">ğŸ›’</button>
        <button class="circle-btn" id="btnHelp">â“</button>
    </div>
    <div style="font-size: 26px; font-weight: 900; margin-top: 15px;">Bee Clicker ğŸ</div>
    <div class="stats">ğŸ¯ <span id="honey">0</span> | âš¡ <span id="mps">0</span>/s</div>
    <div class="level-container">
      <div class="level-info"><span>NÃ­vel <span id="lvlDisplay">1</span></span><span id="xpDisplay">0 / 100</span></div>
      <div class="xp-bg"><div class="xp-fill" id="xpFill"></div></div>
    </div>
  </div>

  <div class="card notif-card">
      <div class="notif-icon-fixed">ğŸ“¢</div>
      <div id="notifContainer"></div>
  </div>

  <div class="card">
    <div class="click-zone">
      <div class="target" id="leftTarget">ğŸ¯</div>
      <div class="aura-wrapper">
        <div id="active-boosts" style="position: absolute; top: -45px; display: flex; gap: 6px;"></div>
        <div class="aura" id="aura"></div>
        <div id="bee" class="bee">ğŸ</div>
      </div>
      <div class="target" id="rightTarget">ğŸ¯</div>
    </div>
  </div>

  <div class="card">
    <button id="btnUpgradeClick">Upgrade Clique â€“ 10 ğŸ¯</button>
    <button id="btnAutoAction">Desbloquear Auto â€“ 100 ğŸ¯</button>
    <button id="openAchievements" style="background:#f8f8f8; box-shadow:0 6px 0 #ddd;">ğŸ† Conquistas (<span id="achCount">0</span>/200)</button>
  </div>
</div>

<div class="modal" id="shopModal"><div class="modal-box"><div class="modal-header">ğŸ›’ Loja de Boosts <span onclick="closeModal('shopModal')" style="cursor:pointer">Ã—</span></div><div class="modal-body"><div class="shop-item"><div class="shop-info"><b>ğŸŒ¶ï¸ Pimenta Habanero</b><small>3x mel por 30s.</small></div><button class="buy-btn" data-cost="500" onclick="buyBoost('pepper', 500)">500 ğŸ¯</button></div><div class="shop-item"><div class="shop-info"><b>ğŸ¥¤ EnergÃ©tico de PÃ³len</b><small>2x mel/vel por 20s.</small></div><button class="buy-btn" data-cost="300" onclick="buyBoost('energy', 300)">300 ğŸ¯</button></div><div class="shop-item"><div class="shop-info"><b>ğŸŒ¼ Flor Dourada</b><small>5x XP por 15s.</small></div><button class="buy-btn" data-cost="1000" onclick="buyBoost('flower', 1000)">1000 ğŸ¯</button></div></div></div></div>

<div class="modal" id="helpModal">
  <div class="modal-box">
    <div class="modal-header">ğŸ“– Manual & Backup <span onclick="closeModal('helpModal')" style="cursor:pointer">Ã—</span></div>
    <div class="modal-body">
        <div class="acc-item active"><div class="acc-header" onclick="toggleAcc(this)">ğŸ Regras da Colmeia <span>â–¼</span></div><div class="acc-content"><div class="acc-body">Clique para mel. Conquistas Raras (+1%) e Ã‰picas (+5%) dÃ£o bÃ´nus permanentes. Upgrades sÃ³ ativam com saldo!</div></div></div>
        <div class="acc-item"><div class="acc-header" onclick="toggleAcc(this)">â˜ï¸ Backup Seguro <span>â–¼</span></div><div class="acc-content"><div class="acc-body">
            <button onclick="exportSave()" style="background:#333; color:white; height:42px; margin-bottom:12px;">COPIAR CÃ“DIGO DE SAVE</button>
            <button onclick="importSave()" style="background:#777; color:white; height:42px;">IMPORTAR SAVE</button>
        </div></div></div>
    </div>
  </div>
</div>

<div class="modal" id="offlineModal"><div class="modal-box"><div class="modal-header">ğŸ Mel de Descanso</div><div class="modal-body" style="text-align:center; padding:30px;"><div style="font-size:70px;">ğŸ¯</div><p id="offlineText" style="font-weight:bold;"></p><button id="btnCollectOffline" style="background:var(--xp-bar);color:white; box-shadow:0 6px 0 #2d6630;">COLETAR TUDO</button></div></div></div>

<div class="modal" id="achModal"><div class="modal-box"><div class="modal-header">ğŸ† Sala de Conquistas <span onclick="closeModal('achModal')" style="cursor:pointer">Ã—</span></div><div class="filter-bar"><div class="filter-dot active" onclick="setAchFilter('all', this)">ğŸŒ</div><div class="filter-dot" onclick="setAchFilter('common', this)">âšª</div><div class="filter-dot" onclick="setAchFilter('rare', this)">ğŸ”µ</div><div class="filter-dot" onclick="setAchFilter('epic', this)">ğŸŸ£</div></div><div class="modal-body" id="achList"></div></div></div>

<script>
// --- CONFIGURAÃ‡ÃƒO ESTÃVEL DE SALVAMENTO ---
const SAVE_KEY = "BeeRoyal_Definitive_V1";

let honey=0, totalHoneyEver=0, clicks=0, hPerClick=1, clickCost=10, level=1, currentXP=0, nextLevelXP=100, autoUnlocked=false, autoLevel=1, autoCost=100, timeOnline=0, currentFilter='all';
let activeBoosts={pepper:0, energy:0, flower:0};
let pendingOfflineHoney=0, notificationQueue = [], isProcessingNotification = false;

// --- TELA DE INÃCIO & FULLSCREEN ---
function enterGame() {
    const docEl = document.documentElement;
    const rfs = docEl.requestFullscreen || docEl.webkitRequestFullScreen || docEl.mozRequestFullScreen || docEl.msRequestFullscreen;
    if(rfs) rfs.call(docEl).catch(() => {});
    document.getElementById('startScreen').style.opacity = '0';
    setTimeout(() => { document.getElementById('startScreen').style.display = 'none'; document.getElementById('gameUI').style.opacity = '1'; }, 500);
}

// --- FILA DE NOTIFICAÃ‡Ã•ES (4s CADA) ---
function notify(a) { notificationQueue.push(a); processQueue(); }
function processQueue() {
    if (isProcessingNotification || notificationQueue.length === 0) return;
    isProcessingNotification = true;
    const a = notificationQueue.shift();
    const container = document.getElementById("notifContainer");
    const div = document.createElement("div");
    div.className = `popup ${a.r || 'common'}`;
    div.innerHTML = `${a.i || 'ğŸ“¢'} ${a.n}`;
    container.appendChild(div);
    setTimeout(() => { div.remove(); isProcessingNotification = false; processQueue(); }, 4000);
}

// --- 200 CONQUISTAS CRIATIVAS E TEMÃTICAS ---
const achievements = [];
function initAchievements() {
    const honeyNames = [
        "Primeira Gota", "Pote de Barro", "Reserva de Inverno", "Favo de Prata", "Mel do Bosque", "Barril Viscoso", 
        "Lago Doce", "BarÃ£o da Geleia Real", "Magnata do PÃ³len", "ImpÃ©rio Ã‚mbar", "Cascata Dourada", "Tesouro Alado",
        "Oceano de Mel", "GalÃ¡xia de PrÃ³polis", "Universo AÃ§ucarado", "Divindade do Caramelo", "Mestre da Viscosidade",
        "Eternidade Doce", "Infinito de Mel", "Lenda da Colmeia"
    ];
    honeyNames.forEach((n, i) => {
        let val = Math.pow(10, i + 1.5);
        achievements.push({ n, d: `Acumule mel total`, c: () => totalHoneyEver >= val, u: false, i: "ğŸ¯", r: i < 7 ? "common" : (i < 15 ? "rare" : "epic") });
    });

    const clickNames = [
        "Zumbido Leve", "VibraÃ§Ã£o RÃ¡pida", "EsforÃ§o OperÃ¡rio", "Asas de AÃ§o", "FÃºria Amarela", "Flash Alado",
        "Dedo de PrÃ³polis", "Zigue-Zague Mestre", "VÃ´o SupersÃ´nico", "Tornado de PÃ³len", "Maestria Alada",
        "RelÃ¢mpago da Colmeia", "Punho de Favo", "Toque Real", "Divindade dos Cliques"
    ];
    clickNames.forEach((n, i) => {
        let val = [1, 100, 500, 1000, 2500, 5000, 10000, 25000, 50000, 100000, 250000, 500000, 1e6, 2e6, 5e6][i];
        achievements.push({ n, d: `Cliques manuais`, c: () => clicks >= val, u: false, i: "ğŸ‘†", r: i < 5 ? "common" : (i < 10 ? "rare" : "epic") });
    });

    for(let i=1; i<=100; i++) {
        let n = i <= 25 ? `Recruta ${i}` : (i <= 60 ? `Sentinela ${i}` : (i <= 90 ? `BarÃ£o ${i}` : `Arqui-Abelha ${i}`));
        achievements.push({ n, d: `NÃ­vel ${i*10}`, c: () => level >= i*10, u: false, i: "ğŸ“ˆ", r: i < 20 ? "common" : (i < 65 ? "rare" : "epic") });
    }

    for(let i=1; i<=65; i++) {
        achievements.push({ n: `Sobrevivente #${i}`, d: `Jogue muito tempo`, c: () => timeOnline >= (i*1000), u: false, i: "âŒš", r: "common" });
    }
}
initAchievements();

// --- LÃ“GICA DE JOGO & UPGRADES ---
function updateUI() {
    document.getElementById("honey").textContent = Math.floor(honey).toLocaleString();
    document.getElementById("mps").textContent = autoUnlocked ? Math.floor((2 * autoLevel) * getGlobalBonus()) : 0;
    document.getElementById("lvlDisplay").textContent = level;
    document.getElementById("xpDisplay").textContent = `${Math.floor(currentXP)} / ${nextLevelXP}`;
    document.getElementById("xpFill").style.width = `${Math.min(100, (currentXP / nextLevelXP) * 100)}%`;
    document.getElementById("achCount").textContent = achievements.filter(a => a.u).length;
    
    document.getElementById("btnUpgradeClick").textContent = `Upgrade Clique â€“ ${clickCost} ğŸ¯`;
    document.getElementById("btnAutoAction").textContent = !autoUnlocked ? `Auto-Mel â€“ ${autoCost} ğŸ¯` : `Upgrade Auto â€“ ${autoCost} ğŸ¯`;
    
    // VERIFICAÃ‡ÃƒO DE SALDO PARA BOTÃ•ES
    document.getElementById("btnUpgradeClick").disabled = (honey < clickCost);
    document.getElementById("btnAutoAction").disabled = (honey < autoCost);
    document.querySelectorAll(".buy-btn").forEach(btn => btn.disabled = (honey < parseInt(btn.dataset.cost)));
}

function getGlobalBonus() { 
    let rCount = achievements.filter(a => a.u && a.r === 'rare').length; 
    let eCount = achievements.filter(a => a.u && a.r === 'epic').length; 
    let mult = 1 + (rCount * 0.01) + (eCount * 0.05); 
    if(activeBoosts.pepper > 0) mult *= 3; 
    if(activeBoosts.energy > 0) mult *= 2; 
    return mult; 
}

function buyBoost(t, c) { if(honey >= c){ honey -= c; activeBoosts[t] += (t==='pepper'?30:t==='energy'?20:15); updateUI(); notify({n:"Boost Real!", i:"ğŸš€", r:"rare"}); } }

function doClick() { const gain = hPerClick * getGlobalBonus(); honey += gain; totalHoneyEver += gain; clicks++; addXP(gain); clickBuffer.push(Date.now()); updateUI(); }
function addXP(amt) { let xpMult = (activeBoosts.flower > 0) ? 5 : 1; currentXP += (amt * xpMult); while(currentXP >= nextLevelXP){ currentXP -= nextLevelXP; level++; nextLevelXP = Math.floor(nextLevelXP * 1.35); notify({n:`NÃ­vel Real ${level}!`, i:"âœ¨"}); } }
function startAuto() { setInterval(() => { if(autoUnlocked){ const amt = (2 * autoLevel) * getGlobalBonus(); honey += amt; totalHoneyEver += amt; addXP(amt); updateUI(); } }, 1000); }

// --- LOOP DE EFEITOS & CONQUISTAS ---
let clickBuffer = [];
setInterval(() => {
    const cps = clickBuffer.filter(t => Date.now() - t < 1000).length;
    const aura = document.getElementById("aura"), bee = document.getElementById("bee");
    let s=1, o=.3, c="rgba(255,204,0,.4)", sp=3;
    if(activeBoosts.energy > 0) sp = 0.5;
    if(cps > 4){ s=1.3; o=.6; c="rgba(255,140,0,.6)"; sp=Math.min(sp,1.5); }
    if(aura){ aura.style.transform=`scale(${s})`; aura.style.opacity=o; aura.style.background=`radial-gradient(circle, ${c}, transparent 70%)`; }
    if(bee) bee.style.animationDuration=`${sp}s`;
    achievements.forEach(a => { if(!a.u && a.c()){ a.u = true; notify(a); executeSave(); } });
    const container = document.getElementById("active-boosts"); container.innerHTML = "";
    for(let b in activeBoosts) if(activeBoosts[b] > 0){ activeBoosts[b]--; container.innerHTML += `<div class="boost-tag">${b==='pepper'?'ğŸŒ¶ï¸':b==='energy'?'ğŸ¥¤':'ğŸŒ¼'}</div>`; }
    timeOnline += 100;
}, 100);

// --- SALVAMENTO & BACKUP ---
function executeSave(){ 
    const data = {honey, totalHoneyEver, clicks, hPerClick, clickCost, level, currentXP, nextLevelXP, autoUnlocked, autoLevel, autoCost, timeOnline, achs:achievements.map(a=>a.u), timestamp:Date.now()};
    localStorage.setItem(SAVE_KEY, JSON.stringify(data)); 
    document.getElementById("saveIndicator").classList.add("visible"); setTimeout(()=>document.getElementById("saveIndicator").classList.remove("visible"),2000);
}
setInterval(executeSave, 15000);

function exportSave(){ navigator.clipboard.writeText(btoa(localStorage.getItem(SAVE_KEY))); notify({n:"CÃ³digo Copiado!", i:"ğŸ“‹"}); }
function importSave(){ const code = prompt("Cole seu cÃ³digo:"); if(code){ try { localStorage.setItem(SAVE_KEY, atob(code)); location.reload(); } catch(e) { alert("CÃ³digo invÃ¡lido!"); } } }

function load(){
    const raw = localStorage.getItem(SAVE_KEY);
    if(raw){
        const d = JSON.parse(raw);
        honey=d.honey; totalHoneyEver=d.totalHoneyEver; clicks=d.clicks; hPerClick=d.hPerClick; clickCost=d.clickCost; level=d.level; currentXP=d.currentXP; nextLevelXP=d.nextLevelXP; autoUnlocked=d.autoUnlocked; autoLevel=d.autoLevel; autoCost=d.autoCost; timeOnline=d.timeOnline||0;
        if(d.achs) d.achs.forEach((u,i) => { if(achievements[i]) achievements[i].u = u; });
        if(autoUnlocked && d.timestamp){
            const off = Math.floor((Date.now()-d.timestamp)/1000);
            if(off > 15){ pendingOfflineHoney = off * (2 * autoLevel) * getGlobalBonus(); document.getElementById("offlineText").innerHTML=`Suas abelhas produziram <b>${Math.floor(pendingOfflineHoney).toLocaleString()}</b> mel offline!`; openModal('offlineModal'); }
        }
        if(autoUnlocked) startAuto();
    }
    updateUI();
}

// --- MODAIS & INTERFACE ---
function openModal(id){document.getElementById(id).style.display="flex"; if(id==='achModal') renderAchs();}
function closeModal(id){document.getElementById(id).style.display="none";}
function toggleAcc(h){ h.parentElement.classList.toggle('active'); }
function setAchFilter(t,b){ currentFilter=t; document.querySelectorAll('.filter-dot').forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderAchs(); }
function renderAchs(){ const l=document.getElementById("achList"); l.innerHTML=""; achievements.filter(a=>currentFilter==='all'||a.r===currentFilter).forEach(a=>{ l.innerHTML+=`<div class="ach-card ${a.u?'unlocked '+a.r:'locked'}"><div class="ach-icon">${a.u?a.i:'ğŸ”’'}</div><div class="ach-info"><b>${a.n}</b><br><small>${a.d}</small></div></div>`; }); }

document.getElementById("btnHelp").onclick = () => openModal('helpModal');
document.getElementById("btnShop").onclick = () => openModal('shopModal');
document.getElementById("openAchievements").onclick = () => openModal('achModal');
document.getElementById("btnCollectOffline").onclick = () => { honey+=pendingOfflineHoney; totalHoneyEver+=pendingOfflineHoney; pendingOfflineHoney=0; closeModal('offlineModal'); updateUI(); executeSave(); };
document.getElementById("btnAutoAction").onclick = () => { if(honey >= autoCost){ honey -= autoCost; if(!autoUnlocked){autoUnlocked=true;autoCost=200;startAuto();} else{autoLevel++;autoCost=Math.floor(autoCost*1.85);} updateUI(); executeSave(); } };
document.getElementById("btnUpgradeClick").onclick = () => { if(honey >= clickCost){ honey -= clickCost; hPerClick++; clickCost=Math.floor(clickCost*1.7); updateUI(); executeSave(); } };

["bee","leftTarget","rightTarget"].forEach(id => {
    const el = document.getElementById(id);
    el.addEventListener("mousedown", (e) => { e.preventDefault(); doClick(); });
    el.addEventListener("touchstart", (e) => { e.preventDefault(); doClick(); }, {passive:false});
});

load();
</script>
</body>
</html>